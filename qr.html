<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Gerador de QR Code</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
* { box-sizing: border-box; }
body {
    font-family: 'Roboto', sans-serif;
    background-color: #121212;
    color: #fff;
    margin:0;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    min-height:100vh;
    padding:20px;
}
.container {
    background: #1e1e1e;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    max-width: 420px;
    width: 100%;
}
h1 { text-align:center; margin-bottom:20px; color:#ff9800; }
.tabs {
    display: flex;
    margin-bottom: 20px;
    border-radius: 12px;
    overflow: hidden;
    border:1px solid #333;
}
.tab {
    flex: 1;
    text-align: center;
    padding: 12px;
    cursor: pointer;
    background: #21262d;
    color:#c9d1d9;
    font-weight:500;
    transition:0.3s;
}
.tab.active { background: #ff9800; color:#121212; font-weight:700; }
label { display:block; margin-bottom:5px; font-weight:500; }
input, select {
    width: 100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #333;
    background:#2c2c2c;
    color:#fff;
    margin-bottom:5px;
    font-size:16px;
    outline:none;
    transition:0.3s;
}
input.error { border-color: #ff4d4d; }
.error-message { font-size:12px; color:#ff4d4d; margin-bottom:10px; display:none; }
button {
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    background:#ff9800;
    color:#121212;
    font-size:18px;
    cursor:pointer;
    margin-top:10px;
    transition:0.3s;
}
button:hover { background:#e68900; }
#qrcode-wrapper {
    text-align:center;
    margin-top:20px;
    padding:15px;
    background:#2c2c2c;
    border:2px solid #ff9800;
    border-radius:15px;
    display:none;
    width:fit-content;
    margin-left:auto;
    margin-right:auto;
}
.download-btn {
    margin-top:15px;
    display:block;
    padding:10px 20px;
    background:#ff9800;
    color:#121212;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-size:16px;
    text-align:center;
    text-decoration:none;
    transition:0.3s;
}
.download-btn:hover { background:#e68900; }
.hidden { display:none; }
.input-group i { margin-right: 8px; color:#ff9800; }

/* Spinner flutuante sem fundo nem borda */
.spinner {
     border: 6px solid #2c2c2c;
    border-top: 6px solid #ff9800;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
    margin: 20px auto;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
</head>
<body>

<div class="container">
  <h1><i class="fas fa-qrcode"></i> Gerador de QR Code</h1>

  <div class="tabs">
    <div class="tab active" onclick="trocarTipo('texto')">Texto / Link</div>
    <div class="tab" onclick="trocarTipo('wifi')">Rede Wi-Fi</div>
  </div>

  <!-- Texto/Link -->
  <div id="form-texto">
    <div class="input-group">
      <label for="qr-texto"><i class="fas fa-link"></i> Texto ou link</label>
      <input type="text" id="qr-texto" placeholder="Digite o conteúdo">
      <div class="error-message" id="erro-texto">Digite algo para gerar o QR Code.</div>
    </div>
  </div>

  <!-- Wi-Fi -->
  <div id="form-wifi" class="hidden">
    <div class="input-group">
      <label for="ssid"><i class="fas fa-wifi"></i> Nome da Rede (SSID)</label>
      <input type="text" id="ssid" placeholder="Nome da rede Wi-Fi">
      <div class="error-message" id="erro-ssid">Digite o SSID da rede.</div>
    </div>
    <div class="input-group" id="group-senha">
      <label for="senha"><i class="fas fa-lock"></i> Senha</label>
      <input type="password" id="senha" placeholder="Senha da rede Wi-Fi">
      <div class="error-message" id="erro-senha">Digite a senha da rede.</div>
    </div>
    <div class="input-group">
      <label for="tipo"><i class="fas fa-shield-alt"></i> Tipo de segurança</label>
      <select id="tipo" onchange="toggleSenha()">
        <option value="WPA">WPA/WPA2</option>
        <option value="WEP">WEP</option>
        <option value="nopass">Sem senha</option>
      </select>
    </div>
  </div>

  <button onclick="gerarQRCode()"><i class="fas fa-qrcode"></i> Gerar QR Code</button>

  <!-- Spinner flutuante -->
  <div id="spinner" class="spinner hidden"></div>

  <!-- Contêiner do QR Code -->
  <div id="qrcode-wrapper">
    <div id="qrcode"></div>
    <button class="download-btn" id="download-btn" onclick="baixarQRCode()"><i class="fas fa-download"></i> Download PNG</button>
  </div>
</div>

<script>
let modoAtual='texto';

function trocarTipo(tipo){
  modoAtual=tipo;
  document.querySelectorAll('.tabs .tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.tabs .tab')[tipo==='texto'?0:1].classList.add('active');
  document.getElementById('form-texto').classList.toggle('hidden',tipo!=='texto');
  document.getElementById('form-wifi').classList.toggle('hidden',tipo!=='wifi');

  ['qr-texto','ssid','senha'].forEach(id => document.getElementById(id).classList.remove('error'));
  ['erro-texto','erro-ssid','erro-senha'].forEach(id => document.getElementById(id).style.display='none');
  document.getElementById('qrcode').innerHTML='';
  document.getElementById('qrcode-wrapper').style.display='none';
}

function toggleSenha(){
  document.getElementById('group-senha').classList.toggle('hidden', document.getElementById('tipo').value==='nopass');
}

function gerarQRCode(){
  ['qr-texto','ssid','senha'].forEach(id => document.getElementById(id).classList.remove('error'));
  ['erro-texto','erro-ssid','erro-senha'].forEach(id => document.getElementById(id).style.display='none');

  let conteudo=''; let temErro=false;

  if(modoAtual==='texto'){
    const texto = document.getElementById('qr-texto').value.trim();
    if(!texto){ document.getElementById('qr-texto').classList.add('error'); document.getElementById('erro-texto').style.display='block'; temErro=true; }
    else conteudo = texto;
  } else {
    const ssid=document.getElementById('ssid').value.trim();
    const tipo=document.getElementById('tipo').value;
    const senha=document.getElementById('senha').value.trim();
    if(!ssid){ document.getElementById('ssid').classList.add('error'); document.getElementById('erro-ssid').style.display='block'; temErro=true; }
    if(tipo!=='nopass' && !senha){ document.getElementById('senha').classList.add('error'); document.getElementById('erro-senha').style.display='block'; temErro=true; }
    if(!temErro) conteudo=`WIFI:T:${tipo};S:${ssid};P:${senha};;`;
  }

  if(temErro) return;

  document.getElementById('qrcode').innerHTML='';
  document.getElementById('spinner').classList.remove('hidden');
  document.getElementById('qrcode-wrapper').style.display='none';
  document.getElementById('download-btn').style.display='none';

  setTimeout(()=>{
    document.getElementById('spinner').classList.add('hidden');
    document.getElementById('qrcode-wrapper').style.display='block';
    new QRCode(document.getElementById('qrcode'), {text:conteudo,width:256,height:256,correctLevel:QRCode.CorrectLevel.H});
    document.getElementById('download-btn').style.display='block';
  }, 3000);
}

function baixarQRCode(){
  const canvas = document.querySelector('#qrcode canvas');
  if(!canvas){ alert("QR Code não gerado ainda."); return; }
  const link=document.createElement('a');
  link.href=canvas.toDataURL("image/png");
  link.download='qrcode.png';
  link.click();
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gerador de QR Code</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    body { font-family: sans-serif; background: #0d1117; color: #e0e0e0; margin:0; }
    .container { max-width: 420px; margin: 40px auto; background: #161b22; border-radius: 12px; padding: 20px; }
    .tabs { display: flex; margin-bottom: 20px; }
    .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; background: #21262d; color:#c9d1d9; }
    .tab.active { background: #1f6feb; color:white; }
    .form-group { margin-bottom: 15px; }
    label { display:block; margin-bottom:5px; }
    input, select { width: 90%; padding:10px; border-radius:6px; border:none; background:#0d1117; color:#e0e0e0; }
    button { width:100%; padding:12px; background:#1f6feb; color:white; border:none; border-radius:8px; cursor:pointer; margin-top:10px; }
    #qrcode { text-align:center; margin-top:20px; display:none; }
    .download-btn { display:none; margin-top:10px; text-align:center; cursor:pointer; color:#58a6ff; text-decoration:underline; }
    .hidden { display:none; }
  </style>
</head>
<body>
<div class="container">
  <div class="tabs">
    <div class="tab active" onclick="trocarTipo('texto')">Texto / Link</div>
    <div class="tab" onclick="trocarTipo('wifi')">Rede Wi-Fi</div>
  </div>

  <div id="form-texto">
    <div class="form-group">
      <label for="qr-texto">Texto ou link</label>
      <input type="text" id="qr-texto" placeholder="Digite o conteúdo">
    </div>
  </div>

  <div id="form-wifi" class="hidden">
    <div class="form-group">
      <label for="ssid">Nome da Rede (SSID)</label>
      <input type="text" id="ssid" placeholder="Nome da rede Wi-Fi">
    </div>
    <div class="form-group" id="group-senha">
      <label for="senha">Senha</label>
      <input type="password" id="senha" placeholder="Senha da rede Wi-Fi">
    </div>
    <div class="form-group">
      <label for="tipo">Tipo de segurança</label>
      <select id="tipo" onchange="toggleSenha()">
        <option value="WPA">WPA/WPA2</option>
        <option value="WEP">WEP</option>
        <option value="nopass">Sem senha</option>
      </select>
    </div>
  </div>

  <button onclick="gerarQRCode()">Gerar QR Code</button>

  <div id="qrcode"></div>
  <div class="download-btn" id="download-btn" onclick="baixarQRCode()">Baixar QR Code</div>
</div>

<script>
let modoAtual = 'texto';

function trocarTipo(tipo){
  modoAtual = tipo;
  document.querySelectorAll('.tab').forEach((t,i)=> t.classList.remove('active'));
  document.querySelectorAll('.tab')[tipo==='texto'?0:1].classList.add('active');
  document.getElementById('form-texto').classList.toggle('hidden', tipo!=='texto');
  document.getElementById('form-wifi').classList.toggle('hidden', tipo!=='wifi');
  document.getElementById('qrcode').innerHTML=''; document.getElementById('qrcode').style.display='none';
  document.getElementById('download-btn').style.display='none';
}

function toggleSenha(){
  const tipo = document.getElementById('tipo').value;
  document.getElementById('group-senha').classList.toggle('hidden', tipo==='nopass');
}

function gerarQRCode(){
  let conteudo='';
  if(modoAtual==='texto'){
    conteudo = document.getElementById('qr-texto').value.trim();
    if(!conteudo){ alert("Digite algo para gerar QR Code"); return; }
  } else {
    const ssid = document.getElementById('ssid').value.trim();
    const tipo = document.getElementById('tipo').value;
    const senha = document.getElementById('senha').value.trim();
    if(!ssid){ alert("Digite o SSID"); return; }
    if(tipo!=='nopass' && !senha){ alert("Digite a senha"); return; }
    conteudo = `WIFI:T:${tipo};S:${ssid};P:${senha};;`;
  }

  document.getElementById('qrcode').innerHTML='';
  new QRCode(document.getElementById('qrcode'), {text:conteudo,width:256,height:256,correctLevel:QRCode.CorrectLevel.H});
  document.getElementById('qrcode').style.display='block';
  document.getElementById('download-btn').style.display='block';
}

function baixarQRCode(){
  const img = document.querySelector('#qrcode img');
  if(!img){ alert("QR Code não gerado ainda."); return; }
  const link = document.createElement('a');
  link.href = img.src;
  link.download = 'qrcode.png';
  link.click();
}
</script>
</body>
</html>        <div class="error-message hidden" id="error-senha">Este campo não pode ficar vazio</div>
      </div>
      <div class="form-group">
        <label for="tipo">Tipo de segurança</label>
        <select id="tipo" onchange="toggleSenha()">
          <option value="WPA">WPA/WPA2</option>
          <option value="WEP">WEP</option>
          <option value="nopass">Sem senha</option>
        </select>
      </div>
    </div>

    <button onclick="gerarQRCode()">Gerar QR Code</button>

    <div class="qrcode-container">
      <div class="loader" id="loader"></div>
      <div id="qrcode"></div>
      <div class="download-btn" id="download-btn" onclick="baixarQRCode()">
        Baixar QR Code
      </div>
    </div>

    <div class="footer">
     Não guardamos nenhuma informação inserida.
    </div>
  </div>

  <script>
    let modoAtual = 'texto';

    function trocarTipo(tipo) {
      modoAtual = tipo;
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab')[tipo === 'texto' ? 0 : 1].classList.add('active');

      document.getElementById('form-texto').classList.toggle('hidden', tipo !== 'texto');
      document.getElementById('form-wifi').classList.toggle('hidden', tipo !== 'wifi');
      document.getElementById('qrcode').innerHTML = "";
      document.getElementById('qrcode').style.display = "none";
      document.getElementById('download-btn').style.display = "none";
    }

    function toggleSenha() {
      const tipo = document.getElementById('tipo').value;
      const groupSenha = document.getElementById('group-senha');
      groupSenha.classList.toggle('hidden', tipo === 'nopass');
    }

    function gerarQRCode() {
      let conteudo = "";
      let valid = true;

      clearErrors();

      if (modoAtual === "texto") {
        const campo = document.getElementById('qr-texto');
        if (!campo.value.trim()) {
          setError(campo, 'error-qr-texto');
          valid = false;
        } else {
          conteudo = campo.value.trim();
        }
      } else {
        const ssidCampo = document.getElementById('ssid');
        const senhaCampo = document.getElementById('senha');
        const tipo = document.getElementById('tipo').value;

        if (!ssidCampo.value.trim()) {
          setError(ssidCampo, 'error-ssid');
          valid = false;
        }

        if (tipo !== 'nopass' && !senhaCampo.value.trim()) {
          setError(senhaCampo, 'error-senha');
          valid = false;
        }

        conteudo = `WIFI:T:${tipo};S:${ssidCampo.value.trim()};P:${senhaCampo.value.trim()};;`;
      }

      if (!valid) return;

      document.getElementById('qrcode').innerHTML = "";
      document.getElementById('qrcode').style.display = "none";
      document.getElementById('download-btn').style.display = "none";

      document.getElementById('loader').style.display = "block";

      setTimeout(() => {
        new QRCode(document.getElementById('qrcode'), {
          text: conteudo,
          width: 256,
          height: 256
        });

        document.getElementById('loader').style.display = "none";
        document.getElementById('qrcode').style.display = "block";
        document.getElementById('download-btn').style.display = "block";
      }, 1200);
    }

    function setError(campo, mensagemId) {
      campo.classList.add('error');
      document.getElementById(mensagemId).classList.remove('hidden');
    }

    function clearErrors() {
      document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
      document.querySelectorAll('.error-message').forEach(el => el.classList.add('hidden'));
    }

    function baixarQRCode() {
      const img = document.querySelector('#qrcode img');
      if (!img) return;

      const link = document.createElement('a');
      link.href = img.src;
      link.download = 'qr-code.png';
      link.click();
    }

    // Mostrar/ocultar senha com clique no olho
    const senhaCampo = document.getElementById('senha');
    const toggleSenhaIcon = document.getElementById('toggle-senha');
    let senhaVisivel = false;

    toggleSenhaIcon.addEventListener('click', () => {
      senhaVisivel = !senhaVisivel;
      senhaCampo.type = senhaVisivel ? 'text' : 'password';
      toggleSenhaIcon.classList.toggle('fa-eye-slash', senhaVisivel);
    });
  </script>
</body>
</html>
